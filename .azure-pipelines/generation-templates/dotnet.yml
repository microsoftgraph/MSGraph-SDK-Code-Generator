parameters:
  - name: repoName
    type: string

  - name: dllName
    type: string

  - name: packageName
    type: string
    default: Microsoft.Graph

steps:
- pwsh: '$(scriptsDirectory)/copy-dotnet-models.ps1'
  displayName: 'Update .NET models - ${{ parameters.repoName }}'
  env:
    BuildConfiguration: $(buildConfiguration)
    OutputFullPath: $(typewriterDirectory)/output
    RepoModelsDir: $(Build.SourcesDirectory)/${{ parameters.repoName }}/src/{{ parameters.packageName}}/Generated/

- pwsh: dotnet build ${{ parameters.repoName }}/src/{{ parameters.packageName}}/ --configuration $(buildConfiguration)
  displayName: smoke test - build dll for ${{ parameters.dllName }}
